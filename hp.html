<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>GUMI Life Battery | 14H Health Mode</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        .container { width: 90%; max-width: 400px; padding: 30px; border: 2px solid #111; border-radius: 25px; background: #050505; position: relative; }
        
        .battery-case { width: 100%; height: 60px; border: 3px solid #fff; border-radius: 12px; position: relative; padding: 4px; box-sizing: border-box; }
        .battery-case::after { content: ''; position: absolute; right: -12px; top: 15px; width: 8px; height: 20px; background: #fff; border-radius: 0 4px 4px 0; }
        .battery-level { height: 100%; width: 100%; background: #10b981; transition: 0.5s; }
        
        .status-text { font-size: 50px; font-weight: bold; margin: 10px 0; }
        
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        button { padding: 15px; border-radius: 12px; border: none; cursor: pointer; font-weight: bold; font-size: 14px; transition: 0.2s; }
        button:active { transform: scale(0.95); }
        
        .btn-eat { background: #f472b6; color: white; grid-column: span 2; box-shadow: 0 4px #be185d; }
        .btn-eat:disabled { background: #111; color: #333; cursor: not-allowed; box-shadow: none; }
        .btn-little { background: #475569; color: white; box-shadow: 0 4px #1e293b; }
        .btn-tired { background: #1e293b; color: #ef4444; border: 1px solid #7f1d1d; box-shadow: 0 4px #000; }

        #sleep-ui { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; flex-direction: column; align-items: center; justify-content: center; z-index: 999; }
        
        /* ğŸ›Œ ã˜ã‚ã€œã£ã¨ã—ãŸ4ç§’ã®å®‰çœ ç‚¹æ»… */
        .sleep-msg-big { 
            font-size: 32px; 
            font-weight: bold; 
            color: #6366f1; 
            line-height: 1.6;
            animation: sleep-slow 4s infinite ease-in-out; 
        }

        @keyframes sleep-slow { 
            0%, 100% { color: #6366f1; opacity: 1; text-shadow: 0 0 15px #6366f1; } 
            50% { color: #1e1b4b; opacity: 0.2; text-shadow: none; } 
        }

        @keyframes low-blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.2; } }
        .low-battery { animation: low-blink 0.8s infinite !important; background: #ef4444 !important; }
    </style>
</head>
<body>

<div class="container" id="ui">
    <div class="battery-case"><div id="bar" class="battery-level"></div></div>
    <div id="percent" class="status-text">100%</div>
    <div class="controls">
        <button id="eatBtn" class="btn-eat" onclick="eat()">é£¯ã‚’é£Ÿã† (+15%)</button>
        <button onclick="tired(5)">ã¡ã‚‡ã£ã¨ç–²ã‚ŒãŸ (-5%)</button>
        <button class="btn-tired" onclick="tired(10)">ç–²ã‚Œå€’ã—ãŸãƒ¼ï¼ (-10%)</button>
    </div>
    <p style="margin-top:25px; color:#222; font-size:10px;">AM 05:00 è‡ªå‹•å›å¾© | 20:00 é‰„ã®æŸãƒ¢ãƒ¼ãƒ‰</p>
</div>

<div id="sleep-ui">
    <div class="sleep-msg-big">
        ä»Šæ—¥ã¯ã‚‚ã†å¯ãŸæ–¹ãŒã„ã„ã€‚<br>ãŠã‚„ã™ã¿ãƒ¼ ğŸ’¤
    </div>
</div>

<script>
    let hp = 100;
    let mealFlags = { morning: false, lunch: false, dinner: false };

    function update() {
        const now = new Date();
        const hour = now.getHours();
        const min = now.getMinutes();
        const timeDec = hour + (min / 60);

        // âœ… 100%ãƒªãƒŸãƒƒã‚¿ãƒ¼
        if (hp > 100) hp = 100;
        if (hp < 0) hp = 0;

        // ğŸš¨ å¤œ8æ™‚(20:00) å¼·åˆ¶çµ‚äº†
        if (timeDec >= 20.0 || hp <= 0) {
            hp = 0;
            document.getElementById('ui').style.display = 'none';
            document.getElementById('sleep-ui').style.display = 'flex';
            return;
        }

        document.getElementById('bar').style.width = hp + "%";
        document.getElementById('percent').innerText = Math.floor(hp) + "%";

        // ğŸ± é£Ÿäº‹åˆ¤å®š
        let mealType = "";
        if (timeDec >= 0 && timeDec <= 8) mealType = "morning";
        else if (timeDec >= 11 && timeDec <= 13.5) mealType = "lunch";
        else if (timeDec >= 18 && timeDec <= 20) mealType = "dinner";

        const eatBtn = document.getElementById('eatBtn');
        if (mealType !== "" && !mealFlags[mealType]) {
            eatBtn.disabled = false;
            eatBtn.innerText = "ğŸ± " + mealType.toUpperCase() + "ã‚’é£Ÿã† (+15%)";
        } else {
            eatBtn.disabled = true;
            eatBtn.innerText = "ä»Šã¯é£Ÿãˆãªã„...";
        }

        // ãƒãƒƒãƒ†ãƒªãƒ¼ã®è‰²ã¨ç‚¹æ»…
        const barElement = document.getElementById('bar');
        if (hp <= 20 && hp > 0) {
            barElement.classList.add('low-battery');
        } else {
            barElement.classList.remove('low-battery');
            barElement.style.background = hp <= 50 ? "#fbbf24" : "#10b981";
        }
    }

    function eat() { 
        const now = new Date();
        const h = now.getHours() + (now.getMinutes() / 60);
        let type = (h <= 8) ? "morning" : (h >= 11 && h <= 13.5) ? "lunch" : (h >= 18 && h <= 20) ? "dinner" : "";
        if (type && !mealFlags[type]) {
            hp += 15; 
            mealFlags[type] = true; 
            update(); 
        }
    }
    function tired(val) { hp -= val; update(); }

    // ğŸ•’ 6åˆ†ã«1%æ¸›å°‘
    setInterval(() => { if (hp > 0) { hp -= 1; update(); } }, 360000);
    setInterval(update, 1000);
    update();
</script>
</body>
</html>
